{"version":3,"mappings":";;;;;;;;;;;EAMO,WAAeA,GAAe;IACnC,WAAkBC,GAAc;MAC9B,SAAsBC,CAAM,CAAS;UAAA,OAAMF,EAAIG,QAAQF;QAAA;QAAA;QAAhDG;QAAKC;MAEZ,OAAMC,EAAU,YAAM;QACpB,IAAMC,IAAU,SAAVA,EAAUC,CAAC,EAA4B;UAC3CA,CAAI,CAAGC,SAASR,KACdI,EAAOG,EAAGE;QAAA;QAId,SAAIC,GAAG,cAAcJ,IAEd,YAAM;UACXP,EAAIY,IAAI,cAAcL;QAAA;MAAA,GAEvB,CAACN,KAEGG;IAAA;IAGTJ,EAAIa,aAAa,SAASC,IAE1Bd,EAAIe,iBAAiB,qBAAqB;MACxCC,WAAW;IAAA,IAEbhB,EAAIiB,aAAa;MAAA,OAAMC,EAACC,GAAD;QAAMC,IAAG;MAAA,GAAQ;IAAA,IACxCpB,EAAIqB,aACF,YAAM;MACJ,IAAMpB,IAAMqB,EAAS;MACrB,OACEJ,EAAC,OAAD,MAAK,0BACmBA,EAAC,UAAD,MAASjB;IAAA,GAIrC;MACEsB,gBAAgB;MAChBC,aAAa;IAAA;EAAA;EAAA;EAAA;IAAA;MA5CnBN;MAAAO;MAAAnB;MAAAJ;IAAA;MACAiB;IAAA;IAAA;MAGML,IAAOW,CAAM,CAAK;QAAA,0BAAa;MAAA;IAAA;EAAA;AAAA","names":["t","e","f","getData","n","s","g","o","a","name","value","on","off","registerPage","u","showNotification","autoClose","registerMenu","r","l","to","registerTile","i","initialColumns","initialRows","c"],"sources":["../src/index.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport type { PiletApi, PiralStoreDataEvent } from \"app\";\n\nconst Page = React.lazy(() => import(\"./Page\"));\n\nexport function setup(app: PiletApi) {\n  function useValue(name: string) {\n    const [val, setVal] = React.useState(() => app.getData(name));\n\n    React.useEffect(() => {\n      const handler = (ev: PiralStoreDataEvent) => {\n        if (ev.name === name) {\n          setVal(ev.value);\n        }\n      };\n\n      app.on(\"store-data\", handler);\n\n      return () => {\n        app.off(\"store_data\", handler);\n      };\n    }, [name]);\n\n    return val;\n  }\n\n  app.registerPage(\"/page\", Page);\n\n  app.showNotification(\"Hello from Piral!\", {\n    autoClose: 2000,\n  });\n  app.registerMenu(() => <Link to=\"/page\">Page</Link>);\n  app.registerTile(\n    () => {\n      const qxz = useValue(\"qxz\");\n      return (\n        <div>\n          Current value of qxz: <strong>{qxz}</strong>\n        </div>\n      );\n    },\n    {\n      initialColumns: 2,\n      initialRows: 2,\n    }\n  );\n}\n"]}